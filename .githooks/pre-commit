#!/bin/sh
# Cross-platform pre-commit hook wrapper
# Executes the posix script when available, otherwise tries PowerShell
set -e
ROOT="$(git rev-parse --show-toplevel)"
cd "$ROOT"

if command -v bash >/dev/null 2>&1; then
  bash "scripts/pre-commit.sh"
  exit $?
fi

if command -v pwsh >/dev/null 2>&1; then
  pwsh -File ".githooks/pre-commit.ps1"
  exit $?
fi

if command -v powershell >/dev/null 2>&1; then
  powershell -File ".githooks/pre-commit.ps1"
  exit $?
fi

echo "No suitable shell found for pre-commit hook"
exit 1
